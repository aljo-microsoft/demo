<?xml version="1.0" encoding="utf-8"?>
<ApplicationManifest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="GoAppType" ApplicationTypeVersion="1.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">
    <Parameters>
        <Parameter Name="ENVIRONMENT_DATABASE_NAME" DefaultValue="localhost" />
	</Parameters>
	<ServiceManifestImport>
        <ServiceManifestRef ServiceManifestName="GoApp" ServiceManifestVersion="1.0.0" />
		<EnvironmentOverrides CodePackageRef="GoCode">
	         <EnvironmentVariable Name="DATABASE_NAME" Value="[ENVIRONMENT_DATABASE_NAME]" />
	    </EnvironmentOverrides>
	    <!-- Applying Settings.xml GoSecrets to GoApp, and defining distination to deliver Secrets-->
	    <Policies>
	        <ConfigPackagePolicies CodePackageRef="GoCode">
		        <ConfigPackage Name="GoConfig" SectionName="GoSecrets" MountPoint="secretsDistination"  EnvironmentVariableName="SECURE_STORE_SERVICE_DISTINATION" />
		    </ConfigPackagePolicies>
	    </Policies>
    </ServiceManifestImport>
    <DefaultServices>
        <Service Name="GoAppService">
	        <StatelessService ServiceTypeName="GoAppServiceType" InstanceCount="-1" >
			    <SingletonPartition />
			</StatelessService>
	    </Service>
   </DefaultServices>
</ApplicationManifest>
